import { useEffect, useRef } from 'react';

const hasFetchedOnce = useRef(false);

useEffect(() => {
    // if (userId) {
    //   getPreviousSessions();
    //   dispatch(setRefressPreviousSession(false));
    // }
     if (hasFetchedOnce.current) return;

  const interval = setInterval(() => {
    if (userId && typeof userId === 'string') {
      hasFetchedOnce.current = true;
      getPreviousSessions();
      dispatch(setRefressPreviousSession(false));
      clearInterval(interval);
    } else {
      console.log('Waiting for userId...');
    }
  }, 500); // retry every 500ms

  return () => clearInterval(interval);
  }, [getPreviousSessions, shouldPreviousSessionRefresh, userId]);
