const startPolling = (fileName) => {
  const intervalId = setInterval(async () => {
    try {
      const res = await fetch(`https://lumosusersessionmgmt-dev.aexp.com/getFileStatus/${fileName}`, {
        method: 'GET',
        headers: { accept: 'application/json' },
      });

      if (!res.ok) throw new Error('Failed to get file status');

      const result = await res.json();

      // Update your local state or Redux here
      setUploadedFiles((prev) =>
        prev.map((file) =>
          file.file_name === fileName ? { ...file, is_indexed: result.is_indexed } : file
        )
      );

      // âœ… Stop polling if file is indexed
      if (result.is_indexed === true) {
        clearInterval(intervalId);
        console.log(`Stopped polling for ${fileName}`);
      }
    } catch (error) {
      console.error('Error while polling file status:', error);
      clearInterval(intervalId); // Optional: stop on error too
    }
  }, 30000); // 30 seconds
};