curl -X 'POST' \
  'https://lumosusersessionmgmt-dev.aexp.com/getFilesStats' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "user_id": "username@ads.aexp.com",
  "use_case": "Earnings Call Transcript"
}'[
  {
    "file_name": "Visa-test-kamal-1.pdf",
    "crt_ts": "2025-06-03 14:34:04.148208",
    "is_main_file": true,
    "indexing_status": "Failed",
    "chats_creation_status": null,
    "duration": "00:05:25.600996"
  },
  {
    "file_name": "Visa-test-kamal-1.pdf",
    "crt_ts": "2025-06-03 14:34:04.148208",
    "is_main_file": true,
    "indexing_status": "Failed",
    "chats_creation_status": null,
    "duration": "00:00:03.606192"
  },
  {
    "file_name": "Visa-test-kamal-1.pdf",
    "crt_ts": "2025-06-03 14:34:04.148208",
    "is_main_file": true,
    "indexing_status": "Failed",
    "chats_creation_status": null,
    "duration": "00:00:01.809333"
  },
  {
    "file_name": "Visa-test-kamal.pdf",
    "crt_ts": "2025-06-03 10:04:39.211008",
    "is_main_file": true,
    "indexing_status": "Completed",
    "chats_creation_status": "Completed",
    "duration": "00:10:28.929272"
  },
  {
    "file_name": "Visa-test-kamal.pdf",
    "crt_ts": "2025-06-03 10:04:39.211008",
    "is_main_file": false,
    "indexing_status": "Failed",
    "chats_creation_status": null,
    "duration": "00:05:14.630521"
  },
  {
    "file_name": "Visa Q1 revenue.pdf",
    "crt_ts": "2025-06-03 05:44:29.082251",
    "is_main_file": false,
    "indexing_status": "Completed",
    "chats_creation_status": null,
    "duration": "00:05:50.21395"
  },
  {
    "file_name": "CORRECTED-TRANSCRIPT_-Visa-Inc.(V-US)-Q1-2023-Earnings-Call-26-January-2023-5_00-PM-ET.pdf",
    "crt_ts": "2025-06-03 09:55:47.583269",
    "is_main_file": false,
    "indexing_status": "Completed",
    "chats_creation_status": null,
    "duration": "00:05:42.349705"
  },
  {
    "file_name": "CORRECTED-TRANSCRIPT_-Visa-Inc.(V-US)-Q1-2023-Earnings-Call-26-January-2023-5_00-PM-ET.pdf",
    "crt_ts": "2025-06-03 09:55:47.583269",
    "is_main_file": false,
    "indexing_status": "Failed",
    "chats_creation_status": null,
    "duration": "00:01:49.877366"
  }
]/* istanbul ignore file */
import React, { useEffect, useState } from 'react';
import { useSelector } from 'react-redux';
import styles from '../../../styles/FileProcessing.scss';
import { getUserId } from '../../../store/selectors/earningsCallTranscriptSelectors';

const dummyData = {
  fileProcessingStatus: [
    {
      upload_time: '2025-05-30 10:00:01',
      name: 'VISA 2024 Q3.pdf',
      is_main_file: true,
      file_indexing: 'Completed',
      answer_generation: 'Processing',
      execution_time: '3m 23s',
      user_id: 'anupam',
    },
    {
      upload_time: '2025-05-30 09:02:34',
      name: 'Mastercard 2024 Q2.pdf',
      is_main_file: false,
      file_indexing: 'Completed',
      answer_generation: 'NA',
      execution_time: '5m 22s',
      user_id: 'anupam',
    },
    {
      upload_time: '2025-05-30 09:00:05',
      name: 'VISA 2024 Q2.pdf',
      is_main_file: true,
      file_indexing: 'Completed',
      answer_generation: 'Completed',
      execution_time: '8m 13s',
      user_id: 'anupam',
    },
  ],
};

const ProcessingStatus = () => {
  const userId = useSelector(getUserId);
  const [rows, setRows] = useState([]);

  useEffect(() => {
    const formattedRows = dummyData.fileProcessingStatus.flatMap((item, index) => {
      const base = {
        upload_time: item.upload_time,
        is_main_file: item.is_main_file ? 'Yes' : 'No',
        file_indexing: item.file_indexing,
        answer_generation: item.answer_generation,
        name: item.name,
        execution_time: item.execution_time,
        user_id: item.user_id,
      };

      return base;
    });

    setRows(formattedRows);
  }, []);

  return (
    <div className={styles.section}>
      <table className={styles.fileProcessingTable}>
        <thead>
          <tr>
            <th style={{ width: '14%' }}>Uploaded Time</th>
            <th style={{ width: '16%' }}>Name</th>
            <th style={{ width: '14%' }}>Is Main File</th>
            <th style={{ width: '14%' }}>File Indexing</th>
            <th style={{ width: '14%' }}>Answer Generation</th>
            <th style={{ width: '14%' }}>Execution Time</th>
            <th style={{ width: '14%' }}>User ID</th>
          </tr>
        </thead>
        <tbody>
          {rows.map((item) => (
            <tr key={item.id}>
              <td>{item.upload_time}</td>
              <td>{item.name}</td>
              <td>{item.is_main_file }</td>
              <td>{item.file_indexing}</td>
              <td>{item.answer_generation}</td>
              <td>{item.execution_time}</td>
              <td>{item.user_id}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
};

export default ProcessingStatus;

