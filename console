useEffect(() => {
  setMessages(userMessages);

  // find the last LLM message in the new array
  const latestLLM = [...userMessages].reverse().find(m => m.role === 'llm');
  if (latestLLM) {
    setFeedback({
      thumbsup: latestLLM.feedback?.thumbsup ?? false,
      thumbsdown: latestLLM.feedback?.thumbsdown ?? false,
      comment:  latestLLM.feedback?.comment  ?? '',
      submitted:latestLLM.feedback?.submitted?? false,
    });
  }
}, [userMessages]);