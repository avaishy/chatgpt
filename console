 useEffect(() => {
    if (userId) {
      getPreviousSessions(); 
      dispatch(setRefressPreviousSession(false));
    }
  }, [getPreviousSessions, shouldPreviousSessionRefresh]);
 
  useEffect(() => {
  const fetchAndSetSession = async () => {
    if (!previousSessions || !selectedChat?.chat_id || !refreshCurrentSession) return;

    const matchedSession = previousSessions.find(session =>
      session.chats?.some(chat => chat.chat_id === selectedChat.chat_id)
    );

    console.log('matchedSession', matchedSession);
    console.log('refreshCurrentSession', refreshCurrentSession);

    if (matchedSession) {
      dispatch(setCurrentSessionDetails(matchedSession));
      dispatch(setCurrentChat(matchedSession.chats));
      dispatch(setRefressCurrentSession(false));
    }
  };

  fetchAndSetSession();
}, [previousSessions, refreshCurrentSession]);
