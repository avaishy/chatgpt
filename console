const pollUntilIndexed = async (fileName, maxAttempts = 10, delay = 30000) => {
  for (let attempt = 1; attempt <= maxAttempts; attempt += 1) {
    // eslint-disable-next-line no-await-in-loop
    const status = await getFileStatus(fileName);
    if (status.is_indexed) return true;

    // eslint-disable-next-line no-await-in-loop, no-promise-executor-return
    await new Promise((resolve) => {
      setTimeout(resolve, delay);
    });
  }

  toast.error('Indexing timeout. Please try again later.');
  return false;
};